<!DOCTYPE html> <!-- defines that this document is an HTML5 document -->
<!-- Comment. It may span multiple lines -->

<html> <!-- the root element of an HTML page -->
 
    <head> <!-- contains meta information about the HTML page -->
        <title>Hello World</title>

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <script type="text/JavaScript">
        $(document).ready(function(){
        $("#butt").click(placeOrder)})
        $(document).ready(async function()
        {
            /*var temp = document.cookie.split('=');
            if(temp[1] != "true")
            {
                window.location.href = "../signin.html";
            }
            else
            {
             let response = await fetch("/orders",  {
                 method: 'GET'
            })*/
            if (response.ok) 
            { 
                let json = await response.json();
                var ul = document.querySelector("ul");
                ul.innerHTML = "";
                for(var i = 0; i < json.orders.length; i++)
                {
                    var item = json.orders[i];
                    console.log(item);
                    var listItem = document.createElement("li");

                    listItem.textContent = "|Order " + (i + 1) + ": |Size: " + item.my_size + " |Color: " + item.my_color + " |Option 1: " + item.option1 + " |Option 2: " + item.option2 + " |Option 3: " + item.option3 + "| ";

                    ul.appendChild(listItem);
                }
                //console.log(json.orders);
            } else {
                alert("HTTP-Error: " + response.status)
                console.log(response.status)
                let json = await response.json()
                console.log(json)
            }
        }
        })
        $(document).ready(function(){
            $("#butt2").click(deleteCookie)
        })
        async function deleteCookie() {
                let response = await fetch("/auth",  {
                    method: 'DELETE'
                })
                if (response.ok) { // if HTTP-status is 200-299
                    // get the response body (the method explained below)
                    let json = await response.json()
                    console.log(json)
                    window.location.href = "../signin.html";


                } else {
                    alert("HTTP-Error: " + response.status)
                    console.log(response.status)
                    let json = await response.json()
                    console.log(json)
                }
            }
        function placeOrder()
        {
            window.location.href = "./order.html";
        }
        </script>
        
    </head>

    <body> <!-- defines the document's body, and is a container for all the visible contents -->


        <ul class = "orderList">
        </ul>

        <button type="button" id="butt">Place Order</button>
        <button type="button" id="butt2">Log Out</button>
        
    </body>

</html>